<div class="profile-layout">

  <aside class="sidebar">
    <button class="back">‚Üê Back to home</button>

    <h3>My Space</h3>

    <button (click)="setSection('dashboard')">Dashboard</button>
    <button (click)="setSection('account')">Account details</button>
    <button (click)="setSection('password')">Reset password</button>
    <button class="danger" (click)="setSection('delete')">Delete account</button>

    <button class="logout" (click)="logout()">Logout</button>
  </aside>

  <main class="content">

    <section *ngIf="activeSection == 'dashboard'">
      <h2>Dashboard</h2>
      <p>Welcome back {{ user.firstName }} {{ user.lastName }}</p>
    </section>

    <section *ngIf="activeSection == 'account'">
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
      <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
      <div class="header-row">
        <h2>Account details</h2>
        <button (click)="toggleEdit()">
          {{ isEditing ? 'Save' : 'Edit' }}
        </button>
      </div>

      <form class="form-grid">
        <div class="form-group">
          <label>First name</label>
          <input [(ngModel)]="editableUser.firstName"
                 name="firstName"
                 [disabled]="!isEditing">
        </div>

        <div class="form-group">
          <label>Last name</label>
          <input [(ngModel)]="editableUser.lastName"
                 name="lastName"
                 [disabled]="!isEditing">
        </div>

        <div class="form-group">
          <label>Email</label>
          <input [(ngModel)]="editableUser.email"
                 name="email"
                 [disabled]="!isEditing">
        </div>

        <div class="form-group">
        <label>Country</label>
          <select [(ngModel)]="editableUser.country" name="country" [disabled]="!isEditing">
            <option *ngFor="let country of countries" [value]="country">{{ country }}</option>
          </select>
        </div>

        <div class="form-group">
          <label>Notifications</label>
          <select [(ngModel)]="editableUser.notifications" name="notifications" [disabled]="!isEditing">
            <option *ngFor="let option of notificationsOptions" [value]="option">{{ option }}</option>
          </select>
        </div>
      </form>
    </section>

    <section *ngIf="activeSection == 'password'">
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
      <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
      <h2>Reset password</h2>
      <form (ngSubmit)="submitResetPassword()">
        <div class="form-grid-vertical">
          <div class="form-group">
            <label>Current Password</label>
            <input type="password" [(ngModel)]="currentPassword" name="currentPassword" required>
          </div>
          <div class="form-group">
            <label>New Password</label>
            <input type="password" [(ngModel)]="newPassword" name="newPassword" required>
          </div>
          <div class="form-group">
            <label>Confirm New Password</label>
            <input type="password" [(ngModel)]="confirmNewPassword" name="confirmNewPassword" required>
          </div>
          <div class="form-group">
            <button type="submit" class="submit">Submit</button>
          </div>
        </div>
      </form>
    </section>

    <section *ngIf="activeSection == 'delete'">
      <div *ngIf="errorMessage" class="error-message">{{ errorMessage }}</div>
      <div *ngIf="successMessage" class="success-message">{{ successMessage }}</div>
      <h2>Delete account</h2>
      <p>This action is irreversible.</p>
      <form (ngSubmit)="submitDeleteAccount()">
        <div class="form-grid-vertical">
          <div class="form-group">
            <label>Type your password</label>
            <input type="password" [(ngModel)]="delete_account_password" name="password" required>
          </div>
          <div class="form-group">
            <label>Type "I want to delete my account."</label>
            <input type="text" [(ngModel)]="confirmationText" name="confirmationText" required>
          </div>
          <div class="form-group">
            <button class="danger" type="submit">Delete my account</button>
          </div>
        </div>
      </form>
    </section>

  </main>

</div>
